<!doctype html>
<html lang="en">
  <head>
	<meta charset="UTF-8" />
	<title>Transcendence</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" href="data:," />
	<!-- Tailwind (CDN) for quick visual iteration; consider local build for production -->
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
	  :root { color-scheme: light dark; }
	  body { margin: 0; font-family: system-ui, sans-serif; background: #ffffff; color: #111111; }
	  @media (prefers-color-scheme: dark) {
		body { background: #0b0b0b; color: #eaeaea; }
		.card { border-color: #2a2a2a; background: #141414; }
		button, a.button { border-color: #3a3a3a; background: #1f1f1f; color: #eaeaea; }
	  }
	  .container { max-width: 720px; margin: 40px auto; padding: 0 16px; }
	  .card { border: 1px solid #ddd; border-radius: 8px; padding: 24px; background: #ffffff; }
	  h1 { margin: 0 0 8px; font-size: 24px; }
	  h3 { margin: 12px 0 8px; font-size: 18px; }
	  p { margin: 0 0 16px; }
	  .actions { display: flex; gap: 12px; flex-wrap: wrap; }
	  button, a.button { padding: 10px 14px; border-radius: 6px; border: 1px solid #ccc; cursor: pointer; text-decoration: none; color: inherit; background: #f7f7f7; }
	  .muted { opacity: .75; font-size: 14px; }
	  form label { display: block; margin: 8px 0 4px; }
	  input[type=text], input[type=password] { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 6px; background: inherit; color: inherit; }
	</style>
  </head>
  <body>
	<noscript>Cette application nécessite JavaScript.</noscript>
	<div id="app" class="container">Chargement…</div>
	<script>
	// OAuth bootstrap: handle tokens in query string and route appropriately
	(function(){
	  try {
	    var url = new URL(window.location.href);
	    var token = url.searchParams.get('token');
	    var twofa = url.searchParams.get('twofa');
	    var registered = url.searchParams.get('registered');
	    if (token) {
	      if (twofa === '1') {
	        // store pre-2FA token in sessionStorage, then go to 2FA page
	        sessionStorage.setItem('ft_pre2fa_token', token);
	        url.searchParams.delete('token');
	        url.searchParams.delete('twofa');
	        history.replaceState(null, '', url.pathname + (url.search?('?'+url.searchParams.toString()):'') + '#/2fa');
	      } else {
	        // store final token in localStorage and go home
	        localStorage.setItem('ft_auth_token', token);
	        url.searchParams.delete('token');
	        history.replaceState(null, '', url.pathname + (url.search?('?'+url.searchParams.toString()):'') + '#/');
	      }
	    } else if (registered === '1') {
	      url.searchParams.delete('registered');
	      history.replaceState(null, '', url.pathname + (url.search?('?'+url.searchParams.toString()):'') + '#/login?registered=1');
	    }
	  } catch (e) {
	    // ignore
	  }
	})();
	</script>
	<script type="module" src="auth.js?v=20251113b"></script>
	<script type="module" src="main.js?v=20251113b"></script>
  </body>
  </html>
